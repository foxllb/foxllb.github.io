  // 获取Token函数
  function getToken() {
      // 创建唯一回调ID
      const callbackId = "token_" + Date.now();

      // 定义全局回调函数
      window[callbackId] = function(error, tokenData) {
          if (error) {
              showResult("获取Token失败: " + error, true);
              return;
          }

          try {
              // 解析返回的Token数据
              const tokenInfo = JSON.parse(tokenData);

              // 格式化显示Token信息
              let resultText = "获取Token成功:\n";
              resultText += "- pluto_sessionid: " + (tokenInfo.pluto_sessionid || "未获取") + "\n";
              resultText += "- rtoken: " + (tokenInfo.rtoken || "未获取") + "\n";
              resultText += "- csrfToken: " + (tokenInfo.csrfToken || "未获取") + "\n";
              resultText += "- encryptCsrfToken: " + (tokenInfo.encryptCsrfToken || "未获取");

              showResult(resultText);
          } catch (e) {
              showResult("解析Token数据失败: " + e.message, true);
          }

          // 清理全局回调函数
          delete window[callbackId];
      };

      // 调用原生方法获取Token
      window.BitKeepJS.postMessage(JSON.stringify([
          "getToken",    // 方法名
          callbackId     // 回调ID
      ]));
  }
